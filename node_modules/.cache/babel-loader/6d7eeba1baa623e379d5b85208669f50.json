{"ast":null,"code":"import _toConsumableArray from\"/Users/Jiachen/Documents/cs185_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/Jiachen/Documents/cs185_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Snackbar from\"@material-ui/core/Snackbar\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import InputLabel from\"@material-ui/core/InputLabel\";import FormHelperText from\"@material-ui/core/FormHelperText\";import FormControl from\"@material-ui/core/FormControl\";import NativeSelect from\"@material-ui/core/NativeSelect\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import config from\"../config\";var firebase=require(\"firebase\");var useStyles=makeStyles(function(theme){return{root:{width:\"100%\",maxWidth:720,\"margin-left\":\"35%\"},header:{\"margin-left\":\"40%\",\"margin-top\":\"3%\"},button:{\"margin-top\":\"3%\",\"margin-left\":\"3%\"},chip:{margin:\"5px\"},di:{display:\"grid\",\"padding-top\":\"50px\",\"grid-template-columns\":\"repeat(auto-fit, minmax(400px, 1fr))\",\"grid-gap\":\"1rem\",\"margin-left\":\"5%\",\"margin-right\":\"5%\"},gridList:{height:500,transform:\"translateZ(0)\"},formControl:{margin:theme.spacing(1),minWidth:120},selectEmpty:{marginTop:theme.spacing(2)},comp:function comp(props){return{background:props.backgroundColor};}};});function validateName(n){return n!=null&&n.length>4&&n.length<21;}function validateDescription(d){return d===\"\"||d.length<100;}function validateMessage(m){return m!=null&&m.length>14&&m.length<501;}function validateEmail(e){return e===\"\"||e.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);}export default function GuestBook(){var classes=useStyles();var validateNext=function validateNext(){if(!validateDescription(description)||!validateMessage(message)||!validateEmail(contact)||!validateName(name)){setOpen(true);}else{var jsonBody={Name:name,Description:description,Message:message,Viewable:viewable,Contact:contact};firebase.database().ref(\"data\").push().set(jsonBody);}};var _React$useState=React.useState(\"defaultName\"),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),description=_React$useState4[0],setDescription=_React$useState4[1];var _React$useState5=React.useState(\"default message          \"),_React$useState6=_slicedToArray(_React$useState5,2),message=_React$useState6[0],setMessage=_React$useState6[1];var _React$useState7=React.useState(true),_React$useState8=_slicedToArray(_React$useState7,2),viewable=_React$useState8[0],setViewable=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),contact=_React$useState10[0],setContact=_React$useState10[1];var _React$useState11=React.useState(false),_React$useState12=_slicedToArray(_React$useState11,2),open=_React$useState12[0],setOpen=_React$useState12[1];var _React$useState13=React.useState([]),_React$useState14=_slicedToArray(_React$useState13,2),data=_React$useState14[0],setData=_React$useState14[1];var _React$useState15=React.useState(true),_React$useState16=_slicedToArray(_React$useState15,2),shouldRender=_React$useState16[0],setShouldRender=_React$useState16[1];useEffect(function(){if(!firebase.apps.length){firebase.initializeApp(config);}var ref=firebase.database().ref(\"data\");ref.on(\"value\",function(snapshot){var val=snapshot.val();snapshot.forEach(function(childSnapshot){var n=childSnapshot.child(\"Name\").val();var d=childSnapshot.child(\"Description\").val();var m=childSnapshot.child(\"Message\").val();var v=childSnapshot.child(\"Viewable\").val();console.log(n,d,m,v);var newData=[];newData.push(n+\" \");console.log(newData);setData(function(prevPack){return[].concat(_toConsumableArray(prevPack),[newData[0]]);});console.log(data);//return true;\n});//setData(state)\nconsole.log(data);});//   for (var i = keys.length - 1; i >= 0; i--) {\n//     newData.push(\"Name \" + val[keys[i]].Name);\n//     console.log(newData);\n//     setData((oldData) => [...oldData, newData]);\n//     console.log(val[keys[i]].Contact);\n//   }\n//   console.log(data);\n},[shouldRender]);return/*#__PURE__*/React.createElement(\"div\",null,console.log(shouldRender),/*#__PURE__*/React.createElement(\"h1\",null,\"Welcome to my page, \\xA0leave a message!\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.di},/*#__PURE__*/React.createElement(List,{className:classes.root},/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{error:!validateName(name),id:\"name\",placeholder:\"your name\",label:\"\",onChange:function onChange(event){return setName(event.target.value);},margin:\"normal\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(FormHelperText,null,\"What's your name?(required)\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{error:!validateDescription(description),id:\"description\",placeholder:\"Describe yourself!\",label:\"\",onChange:function onChange(event){return setDescription(event.target.value);},margin:\"normal\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(FormHelperText,null,\"Tell me something about yourself!\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{error:!validateMessage(message),id:\"message\",placeholder:\"your message\",onChange:function onChange(event){return setMessage(event.target.value);},margin:\"normal\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(FormHelperText,{margin:\"dense\"},\"What have you to say? (required)\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(NativeSelect,{onChange:function onChange(event){return setViewable(event.target.value);},inputProps:{name:\"age\",id:\"age-native-helper\"}},/*#__PURE__*/React.createElement(\"option\",{value:true},\"Yes\"),/*#__PURE__*/React.createElement(\"option\",{value:false},\"No\")),/*#__PURE__*/React.createElement(FormHelperText,null,\"Do you want your message to be public?\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{id:\"email\",error:!validateEmail(contact),label:\"\",onChange:function onChange(event){return setContact(event.target.value);},margin:\"normal\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(FormHelperText,null,\"What's your email?(won't be posted)\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(Button,{color:\"primary\",variant:\"contained\",className:classes.button,onClick:validateNext},\"Submit\"))),/*#__PURE__*/React.createElement(\"hr\",{class:\"solid\"}),/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},open:open,onClose:function onClose(){return setOpen(false);},ContentProps:{\"aria-describedby\":\"message-id\"},message:/*#__PURE__*/React.createElement(\"span\",{id:\"message-id\"},\"Please Review Form Before Proceeding\")})));}","map":{"version":3,"sources":["/Users/Jiachen/Documents/cs185_react/src/pages/GuestBook.jsx"],"names":["React","useState","useEffect","makeStyles","Snackbar","List","ListItem","Button","TextField","InputLabel","FormHelperText","FormControl","NativeSelect","Table","TableBody","TableCell","TableHead","TableRow","config","firebase","require","useStyles","theme","root","width","maxWidth","header","button","chip","margin","di","display","gridList","height","transform","formControl","spacing","minWidth","selectEmpty","marginTop","comp","props","background","backgroundColor","validateName","n","length","validateDescription","d","validateMessage","m","validateEmail","e","match","GuestBook","classes","validateNext","description","message","contact","name","setOpen","jsonBody","Name","Description","Message","Viewable","viewable","Contact","database","ref","push","set","setName","setDescription","setMessage","setViewable","setContact","open","data","setData","shouldRender","setShouldRender","apps","initializeApp","on","snapshot","val","forEach","childSnapshot","child","v","console","log","newData","prevPack","event","target","value","id","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport NativeSelect from \"@material-ui/core/NativeSelect\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport config from \"../config\";\nconst firebase = require(\"firebase\");\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 720,\n    \"margin-left\": \"35%\",\n  },\n  header: {\n    \"margin-left\": \"40%\",\n    \"margin-top\": \"3%\",\n  },\n  button: {\n    \"margin-top\": \"3%\",\n    \"margin-left\": \"3%\",\n  },\n  chip: {\n    margin: \"5px\",\n  },\n  di: {\n    display: \"grid\",\n    \"padding-top\": \"50px\",\n    \"grid-template-columns\": \"repeat(auto-fit, minmax(400px, 1fr))\",\n    \"grid-gap\": \"1rem\",\n    \"margin-left\": \"5%\",\n    \"margin-right\": \"5%\",\n  },\n  gridList: {\n    height: 500,\n    transform: \"translateZ(0)\",\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  comp: (props) => ({\n    background: props.backgroundColor,\n  }),\n}));\n\nfunction validateName(n) {\n  return n != null && n.length > 4 && n.length < 21;\n}\n\nfunction validateDescription(d) {\n  return d === \"\" || d.length < 100;\n}\n\nfunction validateMessage(m) {\n  return m != null && m.length > 14 && m.length < 501;\n}\nfunction validateEmail(e) {\n  return e === \"\" || e.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n}\n\nexport default function GuestBook() {\n  const classes = useStyles();\n  const validateNext = () => {\n    if (\n      !validateDescription(description) ||\n      !validateMessage(message) ||\n      !validateEmail(contact) ||\n      !validateName(name)\n    ) {\n      setOpen(true);\n    } else {\n      const jsonBody = {\n        Name: name,\n        Description: description,\n        Message: message,\n        Viewable: viewable,\n        Contact: contact,\n      };\n      firebase.database().ref(\"data\").push().set(jsonBody);\n    }\n  };\n  const [name, setName] = React.useState(\"defaultName\");\n  const [description, setDescription] = React.useState(\"\");\n  const [message, setMessage] = React.useState(\"default message          \");\n  const [viewable, setViewable] = React.useState(true);\n  const [contact, setContact] = React.useState(\"\");\n  const [open, setOpen] = React.useState(false);\n  const [data, setData] = React.useState([]);\n  const [shouldRender, setShouldRender] = React.useState(true);\n  useEffect(() => {\n    if (!firebase.apps.length) {\n      firebase.initializeApp(config);\n    }\n    let ref = firebase.database().ref(\"data\");\n    ref.on(\"value\", (snapshot) => {\n      var val = snapshot.val();\n\n      snapshot.forEach(function (childSnapshot) {\n        var n = childSnapshot.child(\"Name\").val();\n        var d = childSnapshot.child(\"Description\").val();\n        var m = childSnapshot.child(\"Message\").val();\n        var v = childSnapshot.child(\"Viewable\").val();\n        console.log(n, d, m, v);\n\n        const newData = [];\n        newData.push(n + \" \");\n        console.log(newData);\n        setData((prevPack) => [...prevPack, newData[0]]);\n        console.log(data);\n        //return true;\n      });\n      //setData(state)\n      console.log(data);\n    });\n\n    //   for (var i = keys.length - 1; i >= 0; i--) {\n    //     newData.push(\"Name \" + val[keys[i]].Name);\n    //     console.log(newData);\n    //     setData((oldData) => [...oldData, newData]);\n    //     console.log(val[keys[i]].Contact);\n    //   }\n\n    //   console.log(data);\n  }, [shouldRender]);\n\n  return (\n    <div>\n      {console.log(shouldRender)}\n      <h1>Welcome to my page, &nbsp;leave a message!</h1>\n      <div className={classes.di}>\n        <List className={classes.root}>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <TextField\n                error={!validateName(name)}\n                id=\"name\"\n                placeholder=\"your name\"\n                label=\"\"\n                onChange={(event) => setName(event.target.value)}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n              <FormHelperText>What's your name?(required)</FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <TextField\n                error={!validateDescription(description)}\n                id=\"description\"\n                placeholder=\"Describe yourself!\"\n                label=\"\"\n                onChange={(event) => setDescription(event.target.value)}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n              <FormHelperText>Tell me something about yourself!</FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <TextField\n                error={!validateMessage(message)}\n                id=\"message\"\n                placeholder=\"your message\"\n                onChange={(event) => setMessage(event.target.value)}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n              <FormHelperText margin=\"dense\">\n                What have you to say? (required)\n              </FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <NativeSelect\n                onChange={(event) => setViewable(event.target.value)}\n                inputProps={{\n                  name: \"age\",\n                  id: \"age-native-helper\",\n                }}\n              >\n                <option value={true}>Yes</option>\n                <option value={false}>No</option>\n              </NativeSelect>\n              <FormHelperText>\n                Do you want your message to be public?\n              </FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <TextField\n                id=\"email\"\n                error={!validateEmail(contact)}\n                label=\"\"\n                onChange={(event) => setContact(event.target.value)}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n              <FormHelperText>\n                What's your email?(won't be posted)\n              </FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              className={classes.button}\n              onClick={validateNext}\n            >\n              Submit\n            </Button>\n          </ListItem>\n        </List>\n        <hr class=\"solid\"></hr>\n        <Snackbar\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n          open={open}\n          onClose={() => setOpen(false)}\n          ContentProps={{\n            \"aria-describedby\": \"message-id\",\n          }}\n          message={\n            <span id=\"message-id\">Please Review Form Before Proceeding</span>\n          }\n        />\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}