{"ast":null,"code":"import _slicedToArray from\"/Users/Jiachen/Documents/cs185_react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import Snackbar from\"@material-ui/core/Snackbar\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import InputLabel from\"@material-ui/core/InputLabel\";import FormHelperText from\"@material-ui/core/FormHelperText\";import FormControl from\"@material-ui/core/FormControl\";import NativeSelect from\"@material-ui/core/NativeSelect\";import Table from\"@material-ui/core/Table\";import TableBody from\"@material-ui/core/TableBody\";import TableCell from\"@material-ui/core/TableCell\";import TableHead from\"@material-ui/core/TableHead\";import TableRow from\"@material-ui/core/TableRow\";import Paper from\"@material-ui/core/Paper\";import TableContainer from\"@material-ui/core/TableContainer\";import TablePagination from\"@material-ui/core/TablePagination\";import config from\"../config\";var firebase=require(\"firebase\");var useStyles=makeStyles(function(theme){return{root:{width:\"100%\",maxWidth:720,\"margin-left\":\"35%\"},header:{\"margin-left\":\"40%\",\"margin-top\":\"3%\"},button:{\"margin-top\":\"3%\",\"margin-left\":\"3%\"},chip:{margin:\"5px\"},paper:{width:\"100%\"},container:{maxHeight:550},di:{display:\"grid\",\"padding-top\":\"50px\",\"grid-template-columns\":\"repeat(auto-fit, minmax(400px, 1fr))\",\"grid-gap\":\"1rem\",\"margin-left\":\"5%\",\"margin-right\":\"5%\"},gridList:{height:500,transform:\"translateZ(0)\"},formControl:{margin:theme.spacing(1),minWidth:120},selectEmpty:{marginTop:theme.spacing(2)},comp:function comp(props){return{background:props.backgroundColor};}};});function validateName(n){return n!=null&&n.length>4&&n.length<21;}function validateDescription(d){return d===\"\"||d.length<100;}function validateMessage(m){return m!=null&&m.length>14&&m.length<501;}function validateEmail(e){return e===\"\"||e.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);}export default function GuestBook(){var classes=useStyles();var validateNext=function validateNext(){if(!validateDescription(description)||!validateMessage(message)||!validateEmail(contact)||!validateName(name)){setAlert(\"Please Filling correct information Before Submitting\");setOpen(true);}else{var today=new Date();var date=today.getFullYear()+\"-\"+(today.getMonth()+1)+\"-\"+today.getDate()+\" \"+today.getHours()+\":\"+today.getMinutes()+\":\"+today.getSeconds();var jsonBody={Name:name,Description:description,Message:message,Viewable:viewable,Time:date,Contact:contact};firebase.database().ref(\"data\").push().set(jsonBody);setAlert(\"Message Submitted!\");setOpen(true);}};var _React$useState=React.useState(\"\"),_React$useState2=_slicedToArray(_React$useState,2),name=_React$useState2[0],setName=_React$useState2[1];var _React$useState3=React.useState(\"\"),_React$useState4=_slicedToArray(_React$useState3,2),description=_React$useState4[0],setDescription=_React$useState4[1];var _React$useState5=React.useState(\"\"),_React$useState6=_slicedToArray(_React$useState5,2),message=_React$useState6[0],setMessage=_React$useState6[1];var _React$useState7=React.useState(true),_React$useState8=_slicedToArray(_React$useState7,2),viewable=_React$useState8[0],setViewable=_React$useState8[1];var _React$useState9=React.useState(\"\"),_React$useState10=_slicedToArray(_React$useState9,2),contact=_React$useState10[0],setContact=_React$useState10[1];var _React$useState11=React.useState(\"\"),_React$useState12=_slicedToArray(_React$useState11,2),alert=_React$useState12[0],setAlert=_React$useState12[1];var _React$useState13=React.useState(false),_React$useState14=_slicedToArray(_React$useState13,2),open=_React$useState14[0],setOpen=_React$useState14[1];var _React$useState15=React.useState([]),_React$useState16=_slicedToArray(_React$useState15,2),data=_React$useState16[0],setData=_React$useState16[1];var _React$useState17=React.useState(true),_React$useState18=_slicedToArray(_React$useState17,2),shouldRender=_React$useState18[0],setShouldRender=_React$useState18[1];var _React$useState19=React.useState(0),_React$useState20=_slicedToArray(_React$useState19,2),page=_React$useState20[0],setPage=_React$useState20[1];var _React$useState21=React.useState(10),_React$useState22=_slicedToArray(_React$useState21,2),rowsPerPage=_React$useState22[0],setRowsPerPage=_React$useState22[1];var handleChangePage=function handleChangePage(event,newPage){setPage(newPage);};var handleChangeRowsPerPage=function handleChangeRowsPerPage(event){setRowsPerPage(+event.target.value);setPage(0);};useEffect(function(){if(!firebase.apps.length){firebase.initializeApp(config);}var ref=firebase.database().ref(\"data\");ref.on(\"value\",function(snapshot){var val=snapshot.val();var newData=[];console.log(Object.values(snapshot.val()));setData(Object.values(snapshot.val()));});//   for (var i = keys.length - 1; i >= 0; i--) {\n//     newData.push(\"Name \" + val[keys[i]].Name);\n//     console.log(newData);\n//     setData((oldData) => [...oldData, newData]);\n//     console.log(val[keys[i]].Contact);\n//   }\n//   console.log(data);\n},[shouldRender]);return/*#__PURE__*/React.createElement(\"div\",null,console.log(shouldRender),/*#__PURE__*/React.createElement(\"h1\",null,\"Welcome to my page, \\xA0leave a message!\"),/*#__PURE__*/React.createElement(\"div\",{className:classes.di},/*#__PURE__*/React.createElement(List,{className:classes.root},/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{error:!validateName(name),id:\"name\",placeholder:\"your name\",label:\"\",onChange:function onChange(event){return setName(event.target.value);},margin:\"normal\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(FormHelperText,null,\"What's your name?(required)\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{error:!validateDescription(description),id:\"description\",placeholder:\"Describe yourself!\",label:\"\",onChange:function onChange(event){return setDescription(event.target.value);},margin:\"normal\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(FormHelperText,null,\"Tell me something about yourself!\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{error:!validateMessage(message),id:\"message\",placeholder:\"your message\",onChange:function onChange(event){return setMessage(event.target.value);},margin:\"normal\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(FormHelperText,{margin:\"dense\"},\"What have you to say? (required)\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(NativeSelect,{onChange:function onChange(event){return setViewable(event.target.value);},inputProps:{name:\"age\",id:\"age-native-helper\"}},/*#__PURE__*/React.createElement(\"option\",{value:true},\"Yes\"),/*#__PURE__*/React.createElement(\"option\",{value:false},\"No\")),/*#__PURE__*/React.createElement(FormHelperText,null,\"Do you want your message to be public?\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(FormControl,{className:classes.formControl},/*#__PURE__*/React.createElement(TextField,{id:\"email\",error:!validateEmail(contact),label:\"\",onChange:function onChange(event){return setContact(event.target.value);},margin:\"normal\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(FormHelperText,null,\"What's your email?(won't be posted)\"))),/*#__PURE__*/React.createElement(ListItem,null,/*#__PURE__*/React.createElement(Button,{color:\"primary\",variant:\"contained\",className:classes.button,onClick:validateNext},\"Submit\"))),/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(TableContainer,{className:classes.container},/*#__PURE__*/React.createElement(Table,{stickyHeader:true,\"aria-label\":\"sticky table\"},/*#__PURE__*/React.createElement(TableHead,null,/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Name\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Description\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Message\"),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},\"Time Posted\"))),/*#__PURE__*/React.createElement(TableBody,null,data.slice(page*rowsPerPage,page*rowsPerPage+rowsPerPage).map(function(row){if(row.Viewable===true){return/*#__PURE__*/React.createElement(TableRow,null,/*#__PURE__*/React.createElement(TableCell,{component:\"th\",scope:\"row\"},row.Name),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},row.Description),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},row.Message),/*#__PURE__*/React.createElement(TableCell,{align:\"center\"},row.Time));}else{return;}})))),/*#__PURE__*/React.createElement(TablePagination,{rowsPerPageOptions:[10,20,30],component:\"div\",count:data.length,rowsPerPage:rowsPerPage,page:page,onChangePage:handleChangePage,onChangeRowsPerPage:handleChangeRowsPerPage})),/*#__PURE__*/React.createElement(Snackbar,{anchorOrigin:{vertical:\"bottom\",horizontal:\"center\"},open:open,onClose:function onClose(){return setOpen(false);},ContentProps:{\"aria-describedby\":\"message-id\"},message:/*#__PURE__*/React.createElement(\"span\",{id:\"message-id\"},alert)})));}","map":{"version":3,"sources":["/Users/Jiachen/Documents/cs185_react/src/pages/GuestBook.jsx"],"names":["React","useState","useEffect","makeStyles","Snackbar","List","ListItem","Button","TextField","InputLabel","FormHelperText","FormControl","NativeSelect","Table","TableBody","TableCell","TableHead","TableRow","Paper","TableContainer","TablePagination","config","firebase","require","useStyles","theme","root","width","maxWidth","header","button","chip","margin","paper","container","maxHeight","di","display","gridList","height","transform","formControl","spacing","minWidth","selectEmpty","marginTop","comp","props","background","backgroundColor","validateName","n","length","validateDescription","d","validateMessage","m","validateEmail","e","match","GuestBook","classes","validateNext","description","message","contact","name","setAlert","setOpen","today","Date","date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","jsonBody","Name","Description","Message","Viewable","viewable","Time","Contact","database","ref","push","set","setName","setDescription","setMessage","setViewable","setContact","alert","open","data","setData","shouldRender","setShouldRender","page","setPage","rowsPerPage","setRowsPerPage","handleChangePage","event","newPage","handleChangeRowsPerPage","target","value","apps","initializeApp","on","snapshot","val","newData","console","log","Object","values","id","slice","map","row","vertical","horizontal"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Snackbar from \"@material-ui/core/Snackbar\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport InputLabel from \"@material-ui/core/InputLabel\";\nimport FormHelperText from \"@material-ui/core/FormHelperText\";\nimport FormControl from \"@material-ui/core/FormControl\";\nimport NativeSelect from \"@material-ui/core/NativeSelect\";\nimport Table from \"@material-ui/core/Table\";\nimport TableBody from \"@material-ui/core/TableBody\";\nimport TableCell from \"@material-ui/core/TableCell\";\nimport TableHead from \"@material-ui/core/TableHead\";\nimport TableRow from \"@material-ui/core/TableRow\";\nimport Paper from \"@material-ui/core/Paper\";\nimport TableContainer from \"@material-ui/core/TableContainer\";\nimport TablePagination from \"@material-ui/core/TablePagination\";\nimport config from \"../config\";\nconst firebase = require(\"firebase\");\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    width: \"100%\",\n    maxWidth: 720,\n    \"margin-left\": \"35%\",\n  },\n  header: {\n    \"margin-left\": \"40%\",\n    \"margin-top\": \"3%\",\n  },\n  button: {\n    \"margin-top\": \"3%\",\n    \"margin-left\": \"3%\",\n  },\n  chip: {\n    margin: \"5px\",\n  },\n  paper: {\n    width: \"100%\",\n  },\n  container: {\n    maxHeight: 550,\n  },\n  di: {\n    display: \"grid\",\n    \"padding-top\": \"50px\",\n    \"grid-template-columns\": \"repeat(auto-fit, minmax(400px, 1fr))\",\n    \"grid-gap\": \"1rem\",\n    \"margin-left\": \"5%\",\n    \"margin-right\": \"5%\",\n  },\n  gridList: {\n    height: 500,\n    transform: \"translateZ(0)\",\n  },\n  formControl: {\n    margin: theme.spacing(1),\n    minWidth: 120,\n  },\n  selectEmpty: {\n    marginTop: theme.spacing(2),\n  },\n  comp: (props) => ({\n    background: props.backgroundColor,\n  }),\n}));\n\nfunction validateName(n) {\n  return n != null && n.length > 4 && n.length < 21;\n}\n\nfunction validateDescription(d) {\n  return d === \"\" || d.length < 100;\n}\n\nfunction validateMessage(m) {\n  return m != null && m.length > 14 && m.length < 501;\n}\nfunction validateEmail(e) {\n  return e === \"\" || e.match(/^([\\w.%+-]+)@([\\w-]+\\.)+([\\w]{2,})$/i);\n}\n\nexport default function GuestBook() {\n  const classes = useStyles();\n  const validateNext = () => {\n    if (\n      !validateDescription(description) ||\n      !validateMessage(message) ||\n      !validateEmail(contact) ||\n      !validateName(name)\n    ) {\n      setAlert(\"Please Filling correct information Before Submitting\");\n      setOpen(true);\n    } else {\n      var today = new Date();\n      var date =\n        today.getFullYear() +\n        \"-\" +\n        (today.getMonth() + 1) +\n        \"-\" +\n        today.getDate() +\n        \" \" +\n        today.getHours() +\n        \":\" +\n        today.getMinutes() +\n        \":\" +\n        today.getSeconds();\n      const jsonBody = {\n        Name: name,\n        Description: description,\n        Message: message,\n        Viewable: viewable,\n        Time: date,\n        Contact: contact,\n      };\n      firebase.database().ref(\"data\").push().set(jsonBody);\n      setAlert(\"Message Submitted!\");\n      setOpen(true);\n    }\n  };\n  const [name, setName] = React.useState(\"\");\n  const [description, setDescription] = React.useState(\"\");\n  const [message, setMessage] = React.useState(\"\");\n  const [viewable, setViewable] = React.useState(true);\n  const [contact, setContact] = React.useState(\"\");\n  const [alert, setAlert] = React.useState(\"\");\n  const [open, setOpen] = React.useState(false);\n  const [data, setData] = React.useState([]);\n  const [shouldRender, setShouldRender] = React.useState(true);\n  const [page, setPage] = React.useState(0);\n  const [rowsPerPage, setRowsPerPage] = React.useState(10);\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage);\n  };\n\n  const handleChangeRowsPerPage = (event) => {\n    setRowsPerPage(+event.target.value);\n    setPage(0);\n  };\n\n  useEffect(() => {\n    if (!firebase.apps.length) {\n      firebase.initializeApp(config);\n    }\n    let ref = firebase.database().ref(\"data\");\n    ref.on(\"value\", (snapshot) => {\n      var val = snapshot.val();\n      const newData = [];\n      console.log(Object.values(snapshot.val()));\n      setData(Object.values(snapshot.val()));\n    });\n\n    //   for (var i = keys.length - 1; i >= 0; i--) {\n    //     newData.push(\"Name \" + val[keys[i]].Name);\n    //     console.log(newData);\n    //     setData((oldData) => [...oldData, newData]);\n    //     console.log(val[keys[i]].Contact);\n    //   }\n\n    //   console.log(data);\n  }, [shouldRender]);\n\n  return (\n    <div>\n      {console.log(shouldRender)}\n      <h1>Welcome to my page, &nbsp;leave a message!</h1>\n      <div className={classes.di}>\n        <List className={classes.root}>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <TextField\n                error={!validateName(name)}\n                id=\"name\"\n                placeholder=\"your name\"\n                label=\"\"\n                onChange={(event) => setName(event.target.value)}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n              <FormHelperText>What's your name?(required)</FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <TextField\n                error={!validateDescription(description)}\n                id=\"description\"\n                placeholder=\"Describe yourself!\"\n                label=\"\"\n                onChange={(event) => setDescription(event.target.value)}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n              <FormHelperText>Tell me something about yourself!</FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <TextField\n                error={!validateMessage(message)}\n                id=\"message\"\n                placeholder=\"your message\"\n                onChange={(event) => setMessage(event.target.value)}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n              <FormHelperText margin=\"dense\">\n                What have you to say? (required)\n              </FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <NativeSelect\n                onChange={(event) => setViewable(event.target.value)}\n                inputProps={{\n                  name: \"age\",\n                  id: \"age-native-helper\",\n                }}\n              >\n                <option value={true}>Yes</option>\n                <option value={false}>No</option>\n              </NativeSelect>\n              <FormHelperText>\n                Do you want your message to be public?\n              </FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <FormControl className={classes.formControl}>\n              <TextField\n                id=\"email\"\n                error={!validateEmail(contact)}\n                label=\"\"\n                onChange={(event) => setContact(event.target.value)}\n                margin=\"normal\"\n                variant=\"outlined\"\n              />\n              <FormHelperText>\n                What's your email?(won't be posted)\n              </FormHelperText>\n            </FormControl>\n          </ListItem>\n          <ListItem>\n            <Button\n              color=\"primary\"\n              variant=\"contained\"\n              className={classes.button}\n              onClick={validateNext}\n            >\n              Submit\n            </Button>\n          </ListItem>\n        </List>\n        <Paper className={classes.paper}>\n          <TableContainer className={classes.container}>\n            <Table stickyHeader aria-label=\"sticky table\">\n              <TableHead>\n                <TableRow>\n                  <TableCell align=\"center\">Name</TableCell>\n                  <TableCell align=\"center\">Description</TableCell>\n                  <TableCell align=\"center\">Message</TableCell>\n                  <TableCell align=\"center\">Time Posted</TableCell>\n                </TableRow>\n              </TableHead>\n              <TableBody>\n                {data\n                  .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n                  .map((row) => {\n                    if (row.Viewable === true) {\n                      return (\n                        <TableRow>\n                          <TableCell component=\"th\" scope=\"row\">\n                            {row.Name}\n                          </TableCell>\n                          <TableCell align=\"center\">\n                            {row.Description}\n                          </TableCell>\n                          <TableCell align=\"center\">{row.Message}</TableCell>\n                          <TableCell align=\"center\">{row.Time}</TableCell>\n                        </TableRow>\n                      );\n                    } else {\n                      return;\n                    }\n                  })}\n              </TableBody>\n            </Table>\n          </TableContainer>\n          <TablePagination\n            rowsPerPageOptions={[10, 20, 30]}\n            component=\"div\"\n            count={data.length}\n            rowsPerPage={rowsPerPage}\n            page={page}\n            onChangePage={handleChangePage}\n            onChangeRowsPerPage={handleChangeRowsPerPage}\n          />\n        </Paper>\n        <Snackbar\n          anchorOrigin={{\n            vertical: \"bottom\",\n            horizontal: \"center\",\n          }}\n          open={open}\n          onClose={() => setOpen(false)}\n          ContentProps={{\n            \"aria-describedby\": \"message-id\",\n          }}\n          message={<span id=\"message-id\">{alert}</span>}\n        />\n      </div>\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}